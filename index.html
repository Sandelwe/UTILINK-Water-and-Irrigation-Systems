<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTILINK Water Systems & Irrigation</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Alpine.js for interactivity -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom Styles and Tailwind Config -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .page { display: none; }
        .page.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .page.active {
            animation: fadeIn 0.5s ease-in-out;
        }
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'utilink-blue': '#1a4c9b',
                        'utilink-red': '#e72227',
                        'utilink-gray': {
                            'light': '#f4f7f9',
                            'DEFAULT': '#e5e7eb',
                            'dark': '#374151',
                        },
                        'utilink-dark': '#0d274c',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-utilink-gray-light text-utilink-gray-dark" x-data="{ activePage: 'home' }">

    <!-- Header -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-50" x-data="{ mobileMenuOpen: false }">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <a href="#home" @click="activePage = 'home'" class="flex-shrink-0">
                    <!-- New SVG Logo -->
                    <img class="h-12 w-auto" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 50' fill='none'%3E%3C!-- Water drop icon --%3E%3Cpath d='M25.7998 42.5998C19.8998 42.5998 15.1998 37.8998 15.1998 31.9998C15.1998 22.9998 25.7998 1.4998 25.7998 1.4998C25.7998 1.4998 36.3998 22.9998 36.3998 31.9998C36.3998 37.8998 31.6998 42.5998 25.7998 42.5998Z' fill='%231a4c9b'/%3E%3C!-- Text --%3E%3Ctext font-family='Inter, sans-serif' font-size='20' font-weight='bold' fill='%231a4c9b' x='50' y='35'%3EUTILINK%3C/text%3E%3C/svg%3E" alt="UTILINK Logo">
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex md:space-x-8">
                    <a href="#home" @click="activePage = 'home'" :class="{'text-utilink-red font-bold': activePage === 'home', 'text-gray-600 hover:text-utilink-red': activePage !== 'home'}" class="text-lg font-medium transition-colors">Home</a>
                    <a href="#about" @click="activePage = 'about'" :class="{'text-utilink-red font-bold': activePage === 'about', 'text-gray-600 hover:text-utilink-red': activePage !== 'home'}" class="text-lg font-medium transition-colors">About Us</a>
                    <a href="#products" @click="activePage = 'products'" :class="{'text-utilink-red font-bold': activePage === 'products', 'text-gray-600 hover:text-utilink-red': activePage !== 'products'}" class="text-lg font-medium transition-colors">Products</a>
                    <a href="#contact" @click="activePage = 'contact'" :class="{'text-utilink-red font-bold': activePage === 'contact', 'text-gray-600 hover:text-utilink-red': activePage !== 'contact'}" class="text-lg font-medium transition-colors">Contact</a>
                </nav>

                <!-- CTA Button -->
                <div class="hidden md:block">
                     <a href="#contact" @click="activePage = 'contact'" class="inline-block bg-utilink-red text-white font-semibold px-6 py-2 rounded-lg shadow-md hover:bg-red-700 transition-transform transform hover:scale-105">Get a Quote</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" class="text-gray-600 hover:text-utilink-red focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" :d="mobileMenuOpen ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h16'" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div x-show="mobileMenuOpen" x-transition class="md:hidden bg-white border-t border-gray-200">
            <nav class="flex flex-col space-y-1 px-2 pt-2 pb-3">
                <a href="#home" @click="activePage = 'home'; mobileMenuOpen = false" :class="{'bg-utilink-blue text-white': activePage === 'home', 'text-gray-600 hover:bg-gray-100': activePage !== 'home'}" class="block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#about" @click="activePage = 'about'; mobileMenuOpen = false" :class="{'bg-utilink-blue text-white': activePage === 'about', 'text-gray-600 hover:bg-gray-100': activePage !== 'about'}" class="block px-3 py-2 rounded-md text-base font-medium">About Us</a>
                <a href="#products" @click="activePage = 'products'; mobileMenuOpen = false" :class="{'bg-utilink-blue text-white': activePage === 'products', 'text-gray-600 hover:bg-gray-100': activePage !== 'products'}" class="block px-3 py-2 rounded-md text-base font-medium">Products</a>
                <a href="#contact" @click="activePage = 'contact'; mobileMenuOpen = false" :class="{'bg-utilink-blue text-white': activePage === 'contact', 'text-gray-600 hover:bg-gray-100': activePage !== 'contact'}" class="block px-3 py-2 rounded-md text-base font-medium">Contact</a>
            </nav>
        </div>
    </header>

    <main class="pt-20">
        <!-- Home Page -->
        <section id="home" class="page" :class="{ 'active': activePage === 'home' }">
            <div class="relative bg-utilink-dark h-[calc(100vh-5rem)] flex items-center">
                <!-- Replaced the image with a suitable placeholder for the dark background -->
                <div class="absolute inset-0 bg-cover bg-center opacity-30" style="background-image: url('https://placehold.co/1920x1080/1a4c9b/ffffff?text=Water+Solutions');"></div>
                <div class="relative container mx-auto px-4 sm:px-6 lg:px-8 text-center text-white">
                    <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight">
                        Your Premier Partner in <span class="text-utilink-red">Water & Irrigation</span> Solutions
                    </h1>
                    <p class="mt-6 max-w-3xl mx-auto text-lg md:text-xl text-utilink-gray-light">
                        Delivering SABS-approved PVC, HDPE pipes, fittings, and comprehensive water management systems across Southern Africa.
                    </p>
                    <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4">
                        <a href="#products" @click="activePage = 'products'" class="w-full sm:w-auto inline-block bg-utilink-red text-white font-bold px-8 py-4 rounded-lg text-lg shadow-lg hover:bg-red-700 transition-transform transform hover:scale-105">
                            Explore Our Products
                        </a>
                        <a href="#contact" @click="activePage = 'contact'" class="w-full sm:w-auto inline-block bg-white text-utilink-dark font-bold px-8 py-4 rounded-lg text-lg shadow-lg hover:bg-gray-200 transition-transform transform hover:scale-105">
                            Request a Consultation
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Us Page -->
        <section id="about" class="page py-16 sm:py-24" :class="{ 'active': activePage === 'about' }">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-utilink-red tracking-wide uppercase">Who We Are</h2>
                    <p class="mt-2 text-3xl font-extrabold text-utilink-dark tracking-tight sm:text-4xl">Committed to Excellence in Water Management</p>
                    <p class="mt-4 max-w-2xl mx-auto text-xl text-gray-500">
                        UTILINK specializes in the wholesale of top-tier plastic pipes, fittings, valves, and pumps for the water, effluent, and mineral processing markets.
                    </p>
                </div>
                <div class="mt-16 grid gap-12 lg:grid-cols-3 lg:gap-x-8">
                    <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-utilink-blue text-white">
                                <!-- Icon for Vision (Checkmark) -->
                                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                        </div>
                        <h3 class="mt-4 text-xl font-bold text-utilink-dark">Our Vision</h3>
                        <p class="mt-2 text-base text-gray-500">To be the manufacturer and supplier of choice for leading distributors of plastic pipes in South Africa, driven by innovation and customer satisfaction.</p>
                    </div>
                    <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-utilink-blue text-white">
                                <!-- Icon for Mission (Arrow) -->
                                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" /></svg>
                            </div>
                        </div>
                        <h3 class="mt-4 text-xl font-bold text-utilink-dark">Our Mission</h3>
                        <p class="mt-2 text-base text-gray-500">To place research and technology at the heart of our growth, ensuring cost-effective, high-quality solutions for our clients and a sustainable future for our business.</p>
                    </div>
                     <div class="flex flex-col items-center text-center p-6 bg-white rounded-lg shadow-lg">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-utilink-blue text-white">
                                <!-- Icon for Values (Heart) -->
                                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                            </div>
                        </div>
                        <h3 class="mt-4 text-xl font-bold text-utilink-dark">Our Values</h3>
                        <p class="mt-2 text-base text-gray-500">We are customer-focused, professional, and believe in strong partnerships and sustainable growth, ensuring quality and integrity in all we do.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Page -->
        <section id="products" class="page py-16 sm:py-24 bg-white" :class="{ 'active': activePage === 'products' }">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-utilink-red tracking-wide uppercase">Our Product Catalogue</h2>
                    <p class="mt-2 text-3xl font-extrabold text-utilink-dark tracking-tight sm:text-4xl">A Comprehensive Range of Quality Products</p>
                    <p class="mt-4 max-w-2xl mx-auto text-xl text-gray-500">
                        From industrial pipes to advanced irrigation systems, we provide everything you need for effective water management.
                    </p>
                </div>

                <div class="mt-16 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                    <!-- Pipes -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-5xl font-bold text-utilink-blue">Pipes</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Pipes</h3>
                            <p class="mt-2 text-gray-600">Durable HDPE, uPVC, and Galvanized Steel pipes for all applications, meeting SANS standards.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>HDPE Pipes (PE100, SANS 4427)</li>
                                <li>uPVC Pipes (Pressure, Sewer, High Impact)</li>
                                <li>Galvanized Steel Pipes</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Fittings -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-5xl font-bold text-utilink-blue">Fittings</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Fittings</h3>
                            <p class="mt-2 text-gray-600">A wide array of uPVC, HDPE, and Galvanized fittings to complete any piping system.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>uPVC Pressure & Sewer Fittings</li>
                                <li>HDPE Compression Fittings</li>
                                <li>Galvanized Fittings</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Valves -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-5xl font-bold text-utilink-blue">Valves</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Valves</h3>
                            <p class="mt-2 text-gray-600">High-performance valves for flow control, including gate valves and air release valves.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>Resilient Seated Gate Valves (PN16, PN25)</li>
                                <li>Air Valves (PN16, PN25, PN40)</li>
                                <li>Butterfly & Check Valves</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Irrigation Systems -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-5xl font-bold text-utilink-blue">Irrigation</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Irrigation Systems</h3>
                            <p class="mt-2 text-gray-600">Efficient and sustainable irrigation solutions from our trusted partner, Afriq Water.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>Dripline Irrigation & Kits</li>
                                <li>Quick Coupling Sprinkler Systems</li>
                                <li>Fertilizer Tanks</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Clamps & Couplings -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-5xl font-bold text-utilink-blue">Clamps</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Clamps & Couplings</h3>
                            <p class="mt-2 text-gray-600">Secure and reliable connections with our range of clamps and mechanical couplings.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>Klamflex Couplings & Flange Adaptors</li>
                                <li>Cascade Clamps</li>
                                <li>Compression Clamp Saddles</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Specialized Products -->
                    <div class="product-card bg-utilink-gray-light rounded-lg overflow-hidden shadow-lg flex flex-col">
                        <div class="w-full h-48 flex items-center justify-center p-4 bg-utilink-blue bg-opacity-10">
                            <!-- Words for logo -->
                            <div class="text-4xl font-bold text-utilink-blue">Specialized</div>
                        </div>
                        <div class="p-6 flex-grow">
                            <h3 class="mt-4 text-xl font-bold text-utilink-dark">Specialized Products</h3>
                            <p class="mt-2 text-gray-600">Essential components for municipal and industrial water systems.</p>
                            <ul class="mt-4 text-sm text-gray-500 list-disc list-inside">
                                <li>Fire Hydrants (Underground & Above Ground)</li>
                                <li>Water Meters (V-Series, Y-Series)</li>
                                <li>Pumps, Flanges & Control Valves</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Gemini API Product Recommender -->
                <div class="mt-20">
                    <div class="max-w-2xl mx-auto text-center">
                        <h3 class="text-2xl font-bold text-utilink-dark">Need help choosing? Try our <span class="text-utilink-red">AI Product Recommender ✨</span></h3>
                        <p class="mt-4 text-gray-600">Tell us about your project, and our AI will suggest the best product categories for you.</p>
                    </div>

                    <div class="mt-8 max-w-3xl mx-auto bg-utilink-gray-light p-8 rounded-xl shadow-lg">
                        <label for="project-description" class="block text-lg font-medium text-utilink-dark">Describe your project:</label>
                        <textarea id="project-description" class="mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-utilink-blue focus:ring-utilink-blue" rows="4" placeholder="e.g., 'I need to set up a small drip irrigation system for my vegetable garden that is about 10 meters by 10 meters.'"></textarea>

                        <button id="recommend-button" class="mt-4 w-full bg-utilink-red text-white font-bold py-3 px-4 rounded-md hover:bg-red-700 transition-transform transform hover:scale-105">
                            Get Product Recommendations ✨
                        </button>

                        <div id="recommendation-results" class="mt-6 hidden">
                            <h4 class="text-xl font-bold text-utilink-dark">Recommended Products:</h4>
                            <div id="recommendation-list" class="mt-4 space-y-4"></div>
                            <div class="mt-4">
                                <button id="tts-button" class="bg-utilink-blue text-white font-bold py-2 px-4 rounded-md hover:bg-utilink-dark transition-transform transform hover:scale-105 hidden">
                                    <svg class="w-5 h-5 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.899a9 9 0 010 12.728M5 12h-2m-2-1V5a2 2 0 012-2h1m5 16h-1a2 2 0 01-2-2v-1M12 5V2m-1 2h-2M15 12h2m-2 2v2a2 2 0 01-2 2h-1m-5-9v-2a2 2 0 012-2h1m-5 9v2a2 2 0 01-2 2h1" /></svg>
                                    Listen to Recommendation
                                </button>
                            </div>
                        </div>
                        <div id="loading-indicator" class="mt-6 hidden text-center text-utilink-blue">
                            <p>Generating recommendations...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Page -->
        <section id="contact" class="page py-16 sm:py-24" :class="{ 'active': activePage === 'contact' }">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2 lg:gap-4">
                    <div class="pt-10 pb-12 px-6 sm:pt-16 sm:px-16 lg:py-16 lg:pr-0 xl:py-20 xl:px-20">
                        <div class="lg:self-center">
                            <h2 class="text-3xl font-extrabold text-utilink-dark sm:text-4xl">
                                <span class="block">Ready to start your project?</span>
                            </h2>
                            <p class="mt-4 text-lg leading-6 text-gray-500">Our team of experts is here to provide you with a customized quote and professional advice for your specific needs.</p>
                            <div class="mt-8 space-y-4">
                                <p class="flex items-start text-gray-700">
                                    <svg class="h-6 w-6 text-utilink-red mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                                    <span>Portion 1 of Plot No. 469, Extension 2, Dobson Road, Mabhengu Street, Mbabane, Eswatini</span>
                                </p>
                                <p class="flex items-center text-gray-700">
                                    <svg class="h-6 w-6 text-utilink-red mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                                    <span>+268 7685 6972</span>
                                </p>
                                <p class="flex items-center text-gray-700">
                                    <svg class="h-6 w-6 text-utilink-red mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                                    <span>Info@utilinkgroup.com</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="py-10 px-6 sm:px-16 lg:py-16 lg:pl-0 xl:py-20 xl:px-20 bg-utilink-gray-light">
                        <!-- Formspree setup -->
                        <!-- IMPORTANT: Replace 'your_form_id' with the actual ID from your Formspree form -->
                        <form action="https://formspree.io/f/mqalylwq" method="POST" class="space-y-6">
                            <div>
                                <label for="name" class="sr-only">Full name</label>
                                <input type="text" name="name" id="name" required class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-utilink-blue focus:border-utilink-blue border-gray-300 rounded-md" placeholder="Full name">
                            </div>
                            <div>
                                <label for="email" class="sr-only">Email</label>
                                <input id="email" name="email" type="email" autocomplete="email" required class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-utilink-blue focus:border-utilink-blue border-gray-300 rounded-md" placeholder="Email address">
                            </div>
                            <div>
                                <label for="phone" class="sr-only">Phone</label>
                                <div class="flex">
                                    <select name="country-code" class="rounded-l-md border-gray-300 focus:ring-utilink-blue focus:border-utilink-blue">
                                        <option value="+268">SZ (+268)</option>
                                        <option value="+27">SA (+27)</option>
                                    </select>
                                    <input type="tel" name="phone" id="phone" required class="flex-1 block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-utilink-blue focus:border-utilink-blue border-gray-300 rounded-r-md" placeholder="Phone number">
                                </div>
                            </div>
                            <div>
                                <label for="message" class="sr-only">Message</label>
                                <textarea id="message" name="message" rows="4" required class="block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-utilink-blue focus:border-utilink-blue border border-gray-300 rounded-md" placeholder="How can we help?"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-utilink-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-utilink-red transition-transform transform hover:scale-105">
                                    Send Message
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-utilink-dark text-white">
        <div class="container mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="xl:grid xl:grid-cols-3 xl:gap-8">
                <div class="space-y-8 xl:col-span-1">
                    <!-- New logo in the footer -->
                    <img class="h-10" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 50' fill='none'%3E%3C!-- Water drop icon --%3E%3Cpath d='M25.7998 42.5998C19.8998 42.5998 15.1998 37.8998 15.1998 31.9998C15.1998 22.9998 25.7998 1.4998 25.7998 1.4998C25.7998 1.4998 36.3998 22.9998 36.3998 31.9998C36.3998 37.8998 31.6998 42.5998 25.7998 42.5998Z' fill='%231a4c9b'/%3E%3C!-- Text --%3E%3Ctext font-family='Inter, sans-serif' font-size='20' font-weight='bold' fill='%23FFFFFF' x='50' y='35'%3EUTILINK%3C/text%3E%3C/svg%3E" alt="UTILINK Logo">
                    <p class="text-gray-400 text-base">Your trusted partner for comprehensive water and irrigation solutions in Southern Africa.</p>
                </div>
                <div class="mt-12 grid grid-cols-2 gap-8 xl:mt-0 xl:col-span-2">
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div>
                            <h3 class="text-sm font-semibold text-gray-200 tracking-wider uppercase">Navigation</h3>
                            <ul class="mt-4 space-y-4">
                                <li><a href="#home" @click="activePage = 'home'" class="text-base text-gray-400 hover:text-white">Home</a></li>
                                <li><a href="#about" @click="activePage = 'about'" class="text-base text-gray-400 hover:text-white">About Us</a></li>
                                <li><a href="#products" @click="activePage = 'products'" class="text-base text-gray-400 hover:text-white">Products</a></li>
                                <li><a href="#contact" @click="activePage = 'contact'" class="text-base text-gray-400 hover:text-white">Contact</a></li>
                            </ul>
                        </div>
                        <div class="mt-12 md:mt-0">
                            <h3 class="text-sm font-semibold text-gray-200 tracking-wider uppercase">Contact Us</h3>
                            <ul class="mt-4 space-y-4 text-base text-gray-400">
                                <li><a href="tel:+26876856972" class="hover:text-white">+268 7685 6972</a></li>
                                <li><a href="mailto:Info@utilinkgroup.com" class="hover:text-white">Info@utilinkgroup.com</a></li>
                                <li><span>Mbabane, Eswatini</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-8">
                <p class="text-base text-gray-400 text-center">&copy; 2024 UTILINK Water Systems & Irrigation. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Helper function to convert base64 to an ArrayBuffer
        function base64ToArrayBuffer(base64) {
            const binaryString = window.atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        // Helper function to convert PCM data to a WAV blob
        function pcmToWav(pcmData, sampleRate) {
            const dataLength = pcmData.length * 2; // 2 bytes per sample (Int16)
            const buffer = new ArrayBuffer(44 + dataLength);
            const view = new DataView(buffer);
            let offset = 0;

            function writeString(str) {
                for (let i = 0; i < str.length; i++) {
                    view.setUint8(offset++, str.charCodeAt(i));
                }
            }

            // RIFF chunk descriptor
            writeString('RIFF'); // ChunkID
            view.setUint32(offset, 36 + dataLength, true); // ChunkSize
            offset += 4;
            writeString('WAVE'); // Format
            offset += 4;

            // fmt sub-chunk
            writeString('fmt '); // Subchunk1ID
            view.setUint32(offset, 16, true); // Subchunk1Size
            offset += 4;
            view.setUint16(offset, 1, true); // AudioFormat (1 = PCM)
            offset += 2;
            view.setUint16(offset, 1, true); // NumChannels
            offset += 2;
            view.setUint32(offset, sampleRate, true); // SampleRate
            offset += 4;
            view.setUint32(offset, sampleRate * 2, true); // ByteRate
            offset += 4;
            view.setUint16(offset, 2, true); // BlockAlign
            offset += 2;
            view.setUint16(offset, 16, true); // BitsPerSample
            offset += 2;

            // data sub-chunk
            writeString('data'); // Subchunk2ID
            view.setUint32(offset, dataLength, true); // Subchunk2Size
            offset += 4;

            // Write PCM data
            for (let i = 0; i < pcmData.length; i++) {
                view.setInt16(offset, pcmData[i], true);
                offset += 2;
            }

            return new Blob([view], { type: 'audio/wav' });
        }
        
        const recommendButton = document.getElementById('recommend-button');
        const projectDescriptionTextarea = document.getElementById('project-description');
        const loadingIndicator = document.getElementById('loading-indicator');
        const recommendationResults = document.getElementById('recommendation-results');
        const recommendationList = document.getElementById('recommendation-list');
        const ttsButton = document.getElementById('tts-button');
        const speechAudio = new Audio();
        let lastRecommendationText = '';

        recommendButton.addEventListener('click', async () => {
            const prompt = projectDescriptionTextarea.value.trim();
            if (!prompt) {
                alert('Please describe your project to get recommendations.');
                return;
            }

            loadingIndicator.classList.remove('hidden');
            recommendationResults.classList.add('hidden');
            recommendationList.innerHTML = '';
            lastRecommendationText = '';

            try {
                // LLM API call for product recommendations
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `Act as a helpful UTILINK product expert. Based on the following project description, recommend relevant product categories from our catalogue. Provide a brief explanation for each recommendation. Only use the following categories: Pipes, Fittings, Valves, Irrigation Systems, Clamps & Couplings, Specialized Products. Respond with a JSON array of objects, where each object has a 'category' and a 'description'. Do not add any other text before or after the JSON.
                Project description: ${prompt}` }] });

                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "category": { "type": "STRING" },
                                    "description": { "type": "STRING" }
                                },
                                "propertyOrdering": ["category", "description"]
                            }
                        }
                    }
                };

                const apiKey = "AIzaSyBE8sTVNsBOb90x0K151gwUrersxw16oGM";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content) {
                    const jsonString = result.candidates[0].content.parts[0].text;
                    const recommendations = JSON.parse(jsonString);

                    let fullText = 'Based on your project description, here are our recommendations: ';
                    recommendations.forEach(item => {
                        const card = document.createElement('div');
                        card.className = 'p-4 bg-white rounded-lg shadow-md';
                        card.innerHTML = `
                            <h5 class="text-lg font-semibold text-utilink-blue">${item.category}</h5>
                            <p class="mt-2 text-gray-700">${item.description}</p>
                        `;
                        recommendationList.appendChild(card);
                        fullText += `${item.category}. ${item.description}. `;
                    });
                    
                    lastRecommendationText = fullText;
                    recommendationResults.classList.remove('hidden');
                    ttsButton.classList.remove('hidden');

                } else {
                    recommendationResults.classList.remove('hidden');
                    recommendationList.innerHTML = '<p class="text-red-500">Sorry, something went wrong. Please try again.</p>';
                    ttsButton.classList.add('hidden');
                }
            } catch (error) {
                console.error("Error fetching recommendations:", error);
                recommendationResults.classList.remove('hidden');
                recommendationList.innerHTML = '<p class="text-red-500">An error occurred while generating recommendations. Please try again.</p>';
                ttsButton.classList.add('hidden');
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        });

        ttsButton.addEventListener('click', async () => {
            if (!lastRecommendationText) {
                return;
            }

            ttsButton.disabled = true;
            ttsButton.innerHTML = '<svg class="w-5 h-5 inline-block mr-2 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v2a2 2 0 012-2h2m4-2h2a2 2 0 012 2v2m-6-6v2a2 2 0 012-2h2m4 0h2a2 2 0 012 2v2m-6 4H8m-2 4h4m-4 0a2 2 0 01-2-2v-4a2 2 0 012-2h4a2 2 0 012 2v4a2 2 0 01-2 2z"/></svg> Generating audio...';
            speechAudio.pause();

            try {
                const payload = {
                    contents: [{
                        parts: [{ text: lastRecommendationText }]
                    }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: {
                            voiceConfig: {
                                prebuiltVoiceConfig: { voiceName: "Puck" }
                            }
                        }
                    },
                    model: "gemini-2.5-flash-preview-tts"
                };
                
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                if (audioData && mimeType && mimeType.startsWith("audio/")) {
                    const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)[1], 10);
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);
                    
                    speechAudio.src = audioUrl;
                    speechAudio.play();
                } else {
                    console.error("TTS response error: ", result);
                    alert("Failed to generate audio. Please try again.");
                }

            } catch (error) {
                console.error("Error fetching TTS:", error);
                alert("An error occurred while generating audio. Please try again.");
            } finally {
                ttsButton.disabled = false;
                ttsButton.innerHTML = '<svg class="w-5 h-5 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.899a9 9 0 010 12.728M5 12h-2m-2-1V5a2 2 0 012-2h1m5 16h-1a2 2 0 01-2-2v-1M12 5V2m-1 2h-2M15 12h2m-2 2v2a2 2 0 01-2 2h-1m-5-9v-2a2 2 0 012-2h1m-5 9v2a2 2 0 01-2 2h1"/></svg> Listen to Recommendation';
            }
        });
    </script>
</body>
</html>


